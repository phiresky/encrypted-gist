{"version":3,"sources":["../src/base64.ts","../src/main.ts"],"names":["base64","Github","Github.constructor","Github.getRepo","Github.fetch","Github.fetchJSON","Github.fetchRaw","Github.postJSON","Github.createGist","Github.getGist","GithubRepo","GithubRepo.constructor","GithubRepo.getRefs","GithubRepo.getRef","GithubRepo.updateRef","GithubRepo.getHead","GithubRepo.getTree","GithubRepo.createBlob","GithubRepo.getBlob","GithubRepo.createTree","GithubRepo.createCommit","GithubRepo.pushFileToMaster","SimpleCrypto","SimpleCrypto.encrypt","SimpleCrypto.decrypt","Upload","Upload.getAllowUploadURL","Upload.uploadEncrypted","Upload.downloadFile","Upload.uploadFile","Upload.readFile","Util","Util.randomString","Util.hexToArr","Util.arrToHex","Util.supportsWebP","Util.decodeWebP","GUI","GUI.displayImage"],"mappings":";;;;;;;;;;AAAA,IAAO,MAAM,CAsDZ;AAtDD,CAAA,UAAO,QAAM,EAAC;AACAA,YAAAA,CAAAA,MAAMA,GAAGA,kEAAkEA,CAACA;AAC5EA,YAAAA,CAAAA,MAAMA,GAAGA,UAASA,WAAuBA,EAAEA,GAAYA,EAAEA,MAAeA,EAAAA;AACpF,YAAI,KAAK,GAAG,QAAA,CAAA,MAAM,CAAC;AACnB,YAAG,GAAG,EAAE,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,EAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AAC1C,YAAI,KAAK,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC;YACtC,CAAC;YAAE,GAAG,GAAG,KAAK,CAAC,MAAM;YAAE,MAAM,GAAG,EAAE,CAAC;AAEpC,aAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE;AAC5B,kBAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAC/B,kBAAM,IAAI,KAAK,CAAC,AAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC,GAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,AAAC,CAAC,CAAC;AAC7D,kBAAM,IAAI,KAAK,CAAC,AAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAA,IAAK,CAAC,GAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,AAAC,CAAC,CAAC;AAClE,kBAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;SACnC;AAED,YAAI,AAAC,GAAG,GAAG,CAAC,KAAM,CAAC,EAAE;AACpB,kBAAM,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,MAAM,GAAC,GAAG,GAAC,EAAE,CAAA,AAAC,CAAC;SAClE,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE;AACzB,kBAAM,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,MAAM,GAAC,IAAI,GAAC,EAAE,CAAA,AAAC,CAAC;SACnE;AAED,eAAO,MAAM,CAAC;KACd,CAACA;AAEWA,YAAAA,CAAAA,MAAMA,GAAGA,UAASA,MAAaA,EAAEA,GAAYA,EAAAA;AACzD,YAAI,KAAK,GAAG,QAAA,CAAA,MAAM,CAAC;AACnB,YAAG,GAAG,EAAE,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,EAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AAC1C,YAAI,YAAY,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI;YACtC,GAAG,GAAG,MAAM,CAAC,MAAM;YAAE,CAAC;YAAE,CAAC,GAAG,CAAC;YAC7B,QAAQ;YAAE,QAAQ;YAAE,QAAQ;YAAE,QAAQ,CAAC;AAExC,YAAI,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;AACtC,wBAAY,EAAE,CAAC;AACf,gBAAI,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;AACtC,4BAAY,EAAE,CAAC;aACf;SACD;AAED,YAAI,WAAW,GAAG,IAAI,WAAW,CAAC,YAAY,CAAC;YAC9C,KAAK,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;AAErC,aAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE;AAC5B,oBAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACpC,oBAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACxC,oBAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACxC,oBAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAExC,iBAAK,CAAC,CAAC,EAAE,CAAC,GAAG,AAAC,QAAQ,IAAI,CAAC,GAAK,QAAQ,IAAI,CAAC,AAAC,CAAC;AAC/C,iBAAK,CAAC,CAAC,EAAE,CAAC,GAAG,AAAC,CAAC,QAAQ,GAAG,EAAE,CAAA,IAAK,CAAC,GAAK,QAAQ,IAAI,CAAC,AAAC,CAAC;AACtD,iBAAK,CAAC,CAAC,EAAE,CAAC,GAAG,AAAC,CAAC,QAAQ,GAAG,CAAC,CAAA,IAAK,CAAC,GAAK,QAAQ,GAAG,EAAE,AAAC,CAAC;SACrD;AAED,eAAO,WAAW,CAAC;KACnB,CAAAA;CACDA,CAAAA,CAtDM,MAAM,KAAN,MAAM,GAAA,EAAA,CAAA,CAAA,CAsDZ;ACRD,IAAI,SAAS,GAAG,AAAC,aAAQ,UAAK,SAAS,IAAK,UAAU,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE;AAC3F,WAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;AAC1C,iBAAS,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;AAChD,iBAAS,IAAI,CAAC,KAAK,EAAE;AAAE,mBAAO,KAAK,YAAY,OAAO,IAAI,KAAK,CAAC,WAAW,KAAK,OAAO,GAAG,KAAK,GAAG,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE;AAAE,uBAAO,CAAC,KAAK,CAAC,CAAC;aAAE,CAAC,CAAC;SAAE;AACxJ,iBAAS,SAAS,CAAC,KAAK,EAAE;AAAE,gBAAI;AAAE,oBAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;aAAE,CAAC,OAAO,CAAC,EAAE;AAAE,sBAAM,CAAC,CAAC,CAAC,CAAC;aAAE;SAAE;AACnF,iBAAS,QAAQ,CAAC,KAAK,EAAE;AAAE,gBAAI;AAAE,oBAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;aAAE,CAAC,OAAO,CAAC,EAAE;AAAE,sBAAM,CAAC,CAAC,CAAC,CAAC;aAAE;SAAE;AACnF,iBAAS,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE;AACvB,gBAAI,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC;AACpC,kBAAM,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;SACtF;AACD,YAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC;KACxB,CAAC,CAAC;CACN,CAAC;AC1DF,IAAM,QAAQ,GAAG,qBAAqB,CAAC;AACvC,IAAM,MAAM,GAAG,QAAQ,CAAC;;IAGxB,MAAA;AACCC,aADD,MAAA,GAC0FA;YAAtEA,YAAYA,yDAAWA,IAAIA;YAASA,MAAMA;;8BAD9D,MAAA;;AACoBC,YAAAA,CAAAA,YAAYA,GAAZA,YAAYA,CAAeA;AAASA,YAAAA,CAAAA,MAAMA,GAANA,MAAMA,CAA4BA;KAAKA;;iBAD/F,MAAA;;eAEQD,iBAACA,IAAYA,EAAAA;AACnBE,mBAAOA,IAAIA,UAAUA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;SAClCA;;;;;;;;;;;;;WACUF,UAACA,IAAYA,EAAEA,IAAkBA,EAAsBA;gBAApBA,YAAYA,yDAAGA,KAAKA;;AD6D3D,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC5D3DG,oBAAIA,CAACA,IAAIA,EAAEA,IAAIA,GAAGA,EAAEA,OAAOA,EAAEA,IAAIA,OAAOA,EAAEA,EAAEA,CAACA;AAC7CA,oBAAIA,CAACA,IAAIA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,OAAOA,EAAEA,CAACA;AAChDA,oBAAMA,CAACA,GAAYA,IAAIA,CAACA,OAAkBA,CAACA;AAC3CA,oBAAIA,YAAYA,EACfA,IAAIA,IAAIA,CAACA,YAAYA,EAAEA,CAACA,CAACA,MAAMA,CAACA,eAAeA,EAAEA,QAAQA,GAAGA,IAAIA,CAACA,YAAYA,CAACA,CAACA,KAC1EA,MAAMA,KAAKA,YAAUA,IAAIA,CAACA,MAAMA,SAAIA,IAAIA,2BAAwBA,CAACA;AACvEA,uBAAOA,CAACA,GAAGA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;AAC/CA,uBAAOA,MAAMA,KAAKA,CAACA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;aAC7CA,CAAAA,CAAAA;SAAAH;;;eACcA,mBAACA,IAAYA,EAAEA,IAAkBA,EAAsBA;gBAApBA,YAAYA,yDAAGA,KAAKA;;ADmE/D,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AClE3DI,uBAAOA,MAAMA,CAACA,MAAMA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,IAAIA,EAAEA,YAAYA,CAACA,CAAAA,CAAEA,IAAIA,EAAEA,CAACA;aACjEA,CAAAA,CAAAA;SAAAJ;;;eACaA,kBAACA,IAAYA,EAAEA,IAAkBA,EAAsBA;gBAApBA,YAAYA,yDAAGA,KAAKA;;ADqE9D,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACpE3DK,oBAAMA,OAAOA,GAAGA,IAAIA,OAAOA,EAAEA,CAACA;AAC9BA,uBAAOA,CAACA,MAAMA,CAACA,QAAQA,EAAEA,+BAA+BA,CAACA,CAACA;AAC1DA,oBAAMA,CAACA,GAAGA,MAAMA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,EAAEA,OAAOA,EAAPA,OAAOA,EAAEA,EAAEA,YAAYA,CAACA,CAACA;AAC5DA,uBAAOA,MAAMA,CAACA,CAACA,WAAWA,EAAEA,CAACA;aAC7BA,CAAAA,CAAAA;SAAAL;;;eACaA,kBAACA,IAAYA,EAAEA,IAASA,EAAuCA;gBAArCA,MAAMA,yDAAGA,MAAMA;gBAAEA,YAAYA,yDAAGA,KAAKA;;ADuEtE,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACtE3DM,oBAAMA,OAAOA,GAAGA,IAAIA,OAAOA,EAAEA,CAACA;AAC9BA,uBAAOA,CAACA,MAAMA,CAACA,cAAcA,EAAEA,gCAAgCA,CAACA,CAACA;AACjEA,uBAAOA,MAAMA,IAAIA,CAACA,SAASA,CAACA,IAAIA,EAAEA;AACjCA,0BAAMA,EAANA,MAAMA;AACNA,2BAAOA,EAAPA,OAAOA;AACPA,wBAAIA,EAAEA,IAAIA,CAACA,SAASA,CAACA,IAAIA,CAACA;iBAC1BA,EAAEA,YAAYA,CAACA,CAACA;aACjBA,CAAAA,CAAAA;SAAAN;;;eACeA,oBAACA,WAAmBA,EAAEA,KAAkDA,EAAwCA;gBAAtCA,SAASA,yDAAGA,IAAIA;gBAAEA,YAAYA,yDAAGA,KAAKA;;ADyEzH,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACxE3DO,uBAAOA,MAAMA,IAAIA,CAACA,QAAQA,CAACA,OAAOA,EAAEA;AACnCA,+BAAWA,EAAXA,WAAWA,EAAEA,UAAQA,SAASA;AAC9BA,yBAAKA,EAAEA,KAAKA;iBACZA,EAAEA,MAAMA,EAAEA,YAAYA,CAACA,CAACA;aACzBA,CAAAA,CAAAA;SAAAP;;;eACYA,iBAACA,EAAUA,EAAAA;AD2EjB,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC1E3DQ,uBAAOA,MAAMA,IAAIA,CAACA,SAASA,CAACA,QAAQA,GAAGA,EAAEA,CAACA,CAACA;aAC3CA,CAAAA,CAAAA;SAAAR;;;WAzCF,MAAA;;;IA2CA,UAAA;AACCS,aADD,UAAA,CACoBA,MAAcA,EAASA,IAAYA,EAAAA;8BADvD,UAAA;;AACoBC,YAAAA,CAAAA,MAAMA,GAANA,MAAMA,CAAQA;AAASA,YAAAA,CAAAA,IAAIA,GAAJA,IAAIA,CAAQA;KAAKA;;iBAD5D,UAAA;;eAGcD,mBAAAA;AD+EN,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC9E3DE,uBAAOA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,SAASA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,WAAWA,CAACA,CAACA;aAC5DA,CAAAA,CAAAA;SAAAF;;;eACWA,kBAAqBA;gBAApBA,GAAGA,yDAAGA,cAAcA;;ADiF1B,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AChF3DG,uBAAOA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,SAASA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,YAAYA,GAAGA,GAAGA,CAACA,CAACA;aACnEA,CAAAA,CAAAA;SAAAH;;;eACcA,mBAACA,GAAWA,EAAsBA;gBAApBA,GAAGA,yDAAGA,cAAcA;;ADmF1C,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AClF3DI,uBAAOA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,YAAYA,GAAGA,GAAGA,EAAEA,EAAEA,GAAGA,EAAHA,GAAGA,EAAEA,EAAEA,OAAOA,CAACA,CAACA;aACpFA,CAAAA,CAAAA;SAAAJ;;;eACYA,mBAAAA;ADqFN,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACpF3DK,oBAAMA,MAAMA,GAAGA,MAAMA,IAAIA,CAACA,MAAMA,EAAEA,CAACA;AACnCA,uBAAOA,MAAMA,CAACA,MAAMA,CAACA,GAAaA,CAACA;aACnCA,CAAAA,CAAAA;SAAAL;;;eACYA,iBAACA,GAAWA,EAAmBA;gBAAjBA,SAASA,yDAAGA,KAAKA;;ADuFrC,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACtF3DM,uBAAOA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,SAASA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,aAAaA,GAAGA,GAAGA,IAAIA,SAASA,GAAGA,cAAcA,GAAGA,EAAEA,CAAAA,AAACA,CAACA,CAACA;aACxGA,CAAAA,CAAAA;SAAAN;;;eACeA,oBAACA,IAAiBA,EAAAA;ADyF3B,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACxF3DO,oBAAMA,IAAIA,GAAGA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,YAAYA,EAAEA;AACjEA,4BAAQA,EAAEA,QAAQA;AAClBA,2BAAOA,EAAEA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,EAAEA,KAAKA,EAAEA,IAAIA,CAACA;iBACzCA,CAACA,CAACA;AACHA,uBAAOA,IAAIA,CAACA,GAAGA,CAACA;aAChBA,CAAAA,CAAAA;SAAAP;;;eACYA,iBAACA,GAAGA,EAAAA;AD2FV,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC1F3DQ,uBAAOA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,aAAaA,GAAGA,GAAGA,CAACA,CAACA;aACnEA,CAAAA,CAAAA;SAAAR;;;eACeA,oBAACA,SAAiBA,EAAEA,IAAYA,EAAEA,GAAWA,EAAAA;AD6FtD,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC5F3DS,oBAAMA,IAAIA,GAAGA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,YAAYA,EAAEA;AACjEA,6BAASA,EAATA,SAASA;AACTA,wBAAIA,EAAEA,CAACA,EAAEA,IAAIA,EAAJA,IAAIA,EAAEA,IAAIA,EAAEA,QAAQA,EAAEA,IAAIA,EAAEA,MAAMA,EAAEA,GAAGA,EAAHA,GAAGA,EAAEA,CAACA;iBACnDA,CAACA,CAACA;AACHA,uBAAOA,IAAIA,CAACA;aACZA,CAAAA,CAAAA;SAAAT;;;eACiBA,sBAACA,MAAcA,EAAEA,IAAYA,EAAEA,OAAeA,EAAAA;AD+FzD,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC9F3DU,uBAAOA,MAAMA,IAAIA,CAACA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,IAAIA,GAAGA,cAAcA,EAAEA,EAAEA,OAAOA,EAAPA,OAAOA,EAAEA,OAAOA,EAAEA,CAACA,MAAMA,CAACA,EAAEA,IAAIA,EAAJA,IAAIA,EAAEA,CAACA,CAACA;aACpGA,CAAAA,CAAAA;SAAAV;;;eACqBA,0BAACA,IAAYA,EAAEA,OAAmBA,EAAEA,aAAqBA,EAAAA;ADiGxE,mBAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AChG3DW,oBAAMA,IAAIA,GAAGA,MAAMA,IAAIA,CAACA,OAAOA,EAAEA,CAACA;AAClCA,oBAAMA,OAAOA,GAAGA,MAAMA,IAAIA,CAACA,UAAUA,CAACA,IAAIA,EAAEA,IAAIA,GAAEA,MAAMA,IAAIA,CAACA,UAAUA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAAAA,CAACA,CAACA;AACzFA,oBAAMA,MAAMA,GAAGA,OAAOA,CAACA,GAAGA,CAACA;AAC3BA,oBAAMA,KAAKA,GAAGA,OAAOA,CAACA,IAAIA,CAACA;AAC3BA,oBAAMA,OAAOA,GAAGA,KAAKA,CAACA,MAAMA,CAACA,UAAAA,IAAIA;2BAAIA,IAAIA,CAACA,IAAIA,IAAIA,IAAIA;iBAAAA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;AAC/DA,oBAAMA,MAAMA,GAAGA,MAAMA,IAAIA,CAACA,YAAYA,CAACA,IAAIA,EAAEA,MAAMA,EAAEA,aAAaA,CAACA,CAACA;AACpEA,sBAAMA,IAAIA,CAACA,SAASA,CAACA,MAAMA,CAACA,GAAGA,CAACA,CAACA;AACjCA,uBAAOA,OAAOA,CAACA;aACfA,CAAAA,CAAAA;SAAAX;;;WAhDF,UAAA;;;AAkDA,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;AAC7D,IAAI,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEpC,IAAO,YAAY,CAoBlB;AApBD,CAAA,UAAO,YAAY,EAAC;AACnBY,aAAAA,OAAAA,CAA8BA,IAAgBA,EAAAA;ADmGvC,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AClG3DC,gBAAMA,GAAGA,GAAcA,MAAMA,MAAMA,CAACA,MAAMA,CAACA,WAAWA,CAACA,EAAEA,IAAIA,EAAEA,SAASA,EAAEA,MAAMA,EAAEA,GAAGA,EAAEA,EACtFA,IAAIA,EAAEA,CAACA,SAASA,CAACA,CAACA,CAACA;AACpBA,gBAAMA,EAAEA,GAAGA,IAAIA,UAAUA,CAACA,EAAEA,CAACA,CAACA;;;AAI9BA,gBAAMA,OAAOA,GAAgBA,MAAMA,MAAMA,CAACA,MAAMA,CAACA,SAASA,CAACA,KAAKA,EAAEA,GAAGA,CAACA,CAACA;AACvEA,mBAAOA;AACNA,oBAAIA,EAAEA,IAAIA,UAAUA,EAACA,MAAMA,MAAMA,CAACA,MAAMA,CAACA,OAAOA,CAACA,EAAEA,IAAIA,EAAEA,SAASA,EAAEA,EAAEA,EAAFA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,IAAIA,CAAgBA,CAAAA,CAACA;AACpGA,mBAAGA,EAAEA,MAAMA,CAACA,MAAMA,CAACA,OAAOA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA;AACxCA,uBAAOA,EAAPA,OAAOA;AACPA,kBAAEA,EAAEA,EAAEA;aACNA,CAACA;SACFA,CAAAA,CAAAA;KDkGG;AChHkBD,gBAAAA,CAAAA,OAAOA,GAAAA,OAc5BA,CAAAA;AACDA,aAAAA,OAAAA,CAA8BA,IAAgBA,EAAEA,OAAeA,EAAEA,EAAcA,EAAAA;ADoGxE,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACnG3DE,gBAAMA,GAAGA,GAAGA,MAAMA,MAAMA,CAACA,MAAMA,CAACA,SAASA,CAACA,KAAKA,EAAEA,IAAIA,UAAUA,CAACA,MAAMA,CAACA,MAAMA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,CAACA,EAAEA,SAASA,EAAEA,KAAKA,EAAEA,CAACA,SAASA,CAACA,CAACA,CAACA;AAC9HA,mBAAOA,MAAMA,MAAMA,CAACA,MAAMA,CAACA,OAAOA,CAACA,EAAEA,IAAIA,EAAEA,SAASA,EAAEA,EAAEA,EAAFA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,IAAIA,CAAgBA,CAACA;SACtFA,CAAAA,CAAAA;KDqGG;ACxGkBF,gBAAAA,CAAAA,OAAOA,GAAAA,OAG5BA,CAAAA;CACDA,CAAAA,CApBM,YAAY,KAAZ,YAAY,GAAA,EAAA,CAAA,CAAA,CAoBlB;AACD,IAAO,MAAM,CAqDZ;AArDD,CAAA,UAAO,MAAM,EAAC;AACbG,QAAIA,YAAYA;;AAEfA,aAFGA,YAAYA,CAEAA,CAACA,EAAEA,CAACA,EAAAA;ADyGb,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACxG1D,mBAAO,CAAC,MAAM,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,EAAE,CAAC,sBAAK,CAAC,EAAG,EAAE,OAAO,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,EAAG,CAAA,CAAE,EAAE,CAAC;SAC1H,CAAA,CAAA;KAAAA,CAAAA;AACFA,QAAIA,cAAcA;;AAEjBA,aAFGA,cAAcA,CAEFA,GAAGA,EAAAA;AD4GZ,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC3G1D,gBAAM,IAAI,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC,gBAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpD,gBAAG,IAAI,CAAC,SAAS,EAAE;AAClB,uBAAO,MAAM,CAAC,MAAM,EAAC,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA,CAAE,IAAI,EAAE,CAAA,EAAE,IAAI,CAAC,CAAC;aACrE,MACA,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAC1C,CAAA,CAAA;KAAAA,CAAAA;AACFA,aAAAA,iBAAAA,GAAAA;AD+GO,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC9G3DC,gBAAMA,IAAIA,GAAGA,MAAMA,YAAYA,CAACA,OAAOA,CAACA,IAAIA,CAACA,QAAQA,CAACA,MAAMA,CAACA,YAAYA,CAACA,CAACA,CAACA;AAC5EA,oBAAQA,CAACA,IAAIA,GAAGA,eAAeA,GAAGA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA,GAAGA,GAAGA,GAAGA,IAAIA,CAACA,GAAGA,CAACA;SAChGA,CAAAA,CAAAA;KDgHG;ACnHkBD,UAAAA,CAAAA,iBAAiBA,GAAAA,iBAGtCA,CAAAA;AACDA,aAAAA,eAAAA,CAAsCA,SAAqBA,EAAAA;ADkHpD,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACjH3DE,gBAAMA,QAAQA,GAAGA,IAAIA,CAACA,YAAYA,CAACA,CAACA,EAAEA,EAAEA,CAACA,CAACA;;uBAClBA,MAAMA,YAAYA,CAACA,OAAOA,CAACA,SAASA,CAACA;;gBAAtDA,GAAGA,QAAHA,GAAGA;gBAAEA,EAAEA,QAAFA,EAAEA;gBAAEA,IAAIA,QAAJA,IAAIA;;AACpBA,mBAAOA,EAAEA,GAAGA,EAAHA,GAAGA,EAAEA,EAAEA,EAAFA,EAAEA,EAAEA,GAAGA,EAAEA,MAAMA,YAAYA,CAACA,QAAQA,EAAEA,IAAIA,CAACA,EAAEA,CAACA;SAC5DA,CAAAA,CAAAA;KDmHG;ACvHkBF,UAAAA,CAAAA,eAAeA,GAAAA,eAIpCA,CAAAA;AACDA,aAAAA,YAAAA,CAAmCA,GAAWA,EAAEA,GAAWA,EAAAA;ADqHpD,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACpH3DG,eAAGA,GAAGA,IAAIA,CAACA,QAAQA,CAACA,IAAIA,UAAUA,CAACA,MAAMA,CAACA,MAAMA,CAACA,GAAGA,EAAEA,IAAIA,CAACA,CAACA,CAACA,CAACA;AAC9DA,mBAAOA,MAAMA,YAAYA,CAACA,OAAOA,CAACA,IAAIA,UAAUA,EAACA,MAAMA,cAAcA,CAACA,GAAGA,CAACA,CAAAA,CAACA,EAAEA,GAAGA,EAAEA,IAAIA,UAAUA,CAACA,EAAEA,CAACA,CAACA,CAACA;SACtGA,CAAAA,CAAAA;KDsHG;ACzHkBH,UAAAA,CAAAA,YAAYA,GAAAA,YAGjCA,CAAAA;AACDA,aAAAA,UAAAA,CAAiCA,GAAGA,EAAAA;ADwH7B,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACvH3DI,gBAAIA;AACHA,wBAAQA,CAACA,IAAIA,CAACA,WAAWA,GAAGA,cAAcA,CAACA;AAC3CA,oBAAMA,CAACA,GAAGA,GAAGA,CAACA,MAAMA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;AAC9BA,oBAAIA,CAACA,EAAEA;AACNA,wBAAMA,IAAIA,GAAGA,IAAIA,UAAUA,EAACA,MAAMA,QAAQA,CAACA,CAACA,CAACA,CAAAA,CAACA,CAACA;AAC/CA,wBAAMA,IAAIA,GAAGA,MAAMA,eAAeA,CAACA,IAAIA,CAACA,CAACA;AACzCA,wBAAMA,GAAGA,GAAGA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,CAACA,QAAQA,CAACA,IAAIA,CAACA,GAAGA,CAACA,CAACA,MAAMA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA,CAACA;AACvEA,2BAAOA,CAACA,YAAYA,CAACA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,GAAGA,GAAGA,GAAGA,GAAGA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,CAACA;AACzDA,2BAAOA,IAAIA,CAACA,MAAMA,CAACA;iBACnBA,MACIA,MAAMA,mBAAmBA,CAACA;aAC9BA,CAAAA,OAAOA,CAACA,EAAEA;AACXA,wBAAQA,CAACA,IAAIA,CAACA,WAAWA,GAAGA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;AAC9CA,sBAAMA,CAACA,CAACA;aACRA;SACDA,CAAAA,CAAAA;KD2HG;AC3IkBJ,UAAAA,CAAAA,UAAUA,GAAAA,UAgB/BA,CAAAA;AACDA,aAAAA,QAAAA,CAA+BA,CAAOA,EAAAA;AD6H/B,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;AC5H3DK,mBAAOA,IAAIA,OAAOA,CAAcA,UAACA,OAAOA,EAAEA,MAAMA,EAAAA;AAC/CA,oBAAMA,CAACA,GAAGA,IAAIA,UAAUA,EAAEA,CAACA;AAC3BA,iBAACA,CAACA,MAAMA,GAAGA,UAAAA,CAACA;2BAAIA,OAAOA,CAACA,CAACA,CAACA,MAAqBA,CAACA;iBAAAA,CAACA;AACjDA,iBAACA,CAACA,iBAAiBA,CAACA,CAACA,CAACA,CAACA;aACvBA,CAACA,CAACA;SACHA,CAAAA,CAAAA;KD8HG;ACpIkBL,UAAAA,CAAAA,QAAQA,GAAAA,QAM7BA,CAAAA;CACDA,CAAAA,CArDM,MAAM,KAAN,MAAM,GAAA,EAAA,CAAA,CAAA,CAqDZ;AAED,IAAO,IAAI,CAoCV;AApCD,CAAA,UAAO,IAAI,EAAC;AACXM,aAAAA,YAAAA,CAA6BA,SAAiBA;YAAEA,SAASA,yDAAGA,SAASA;4BAAAA;AACpEC,gBAAMA,MAAMA,GAAGA,AAACA,IAAIA,CAACA,MAAMA,EAAEA,IAAIA,SAASA,GAAGA,CAACA,GAAGA,SAASA,CAAAA,AAACA,GAAGA,SAASA,GAAIA,CAACA,CAACA;AAC7EA,mBAAOA,MAAMA,CAACA,MAAMA,CAACA,MAAMA,CAACA,eAAeA,CAACA,IAAIA,UAAUA,CAACA,MAAMA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,MAAMA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA,CAACA,MAAMA,CAACA,CAACA,EAAEA,MAAMA,CAACA,CAACA;SACvHA;KAAAA;AAHeD,QAAAA,CAAAA,YAAYA,GAAAA,YAG3BA,CAAAA;AACDA,aAAAA,QAAAA,CAAyBA,GAAWA,EAAAA;AACnCE,YAAMA,GAAGA,GAAGA,IAAIA,UAAUA,CAACA,GAAGA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA;AAC3CA,aAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,CAACA,MAAMA,EAAEA,CAACA,IAAIA,CAACA,EAAEA;AACvCA,eAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,QAAQA,CAACA,GAAGA,CAACA,MAAMA,CAACA,CAACA,EAAEA,CAACA,CAACA,EAAEA,EAAEA,CAACA,CAACA;SAC5CA;AACDA,eAAOA,GAAGA,CAACA;KACXA;AANeF,QAAAA,CAAAA,QAAQA,GAAAA,QAMvBA,CAAAA;AACDA,aAAAA,QAAAA,CAAyBA,GAAeA,EAAAA;AACvCG,YAAIA,GAAGA,GAAGA,EAAEA,CAACA;AACbA,aAAKA,IAAMA,IAAIA,IAAIA,GAAGA;AAAEA,eAAGA,IAAKA,IAAIA,GAAGA,EAAEA,GAAGA,GAAGA,GAAGA,IAAIA,CAACA,QAAQA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,QAAQA,CAACA,EAAEA,CAACA,AAACA,CAACA;SAAAA,AACzFA,OAAOA,GAAGA,CAACA;KACXA;AAJeH,QAAAA,CAAAA,QAAQA,GAAAA,QAIvBA,CAAAA;AACDA,QAAIA,IAAIA,YAAAA,CAACA;AACTA,aAAAA,YAAAA,GAAAA;ADoIO,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACnI3DI,mBAAOA,IAAIA,OAAOA,CAAUA,UAACA,OAAOA,EAAEA,MAAMA,EAAAA;AAC3CA,oBAAIA,IAAIA,EAAEA,OAAOA,CAACA,IAAIA,CAACA,MAAMA,KAAKA,CAACA,CAACA,CAACA,KAChCA;AACJA,wBAAIA,GAAGA,IAAIA,KAAKA,EAAEA,CAACA;AACnBA,wBAAIA,CAACA,GAAGA,GAAGA,iHAAiHA,CAACA;AAC7HA,wBAAIA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,OAAOA,GAAGA;+BAAMA,OAAOA,CAACA,IAAIA,CAACA,MAAMA,KAAKA,CAACA,CAACA;qBAAAA,CAACA;iBAC9DA;aACDA,CAACA,CAACA;SACHA,CAAAA,CAAAA;KDsIG;AC/IkBJ,QAAAA,CAAAA,YAAYA,GAAAA,YASjCA,CAAAA;AAEDA,aAAAA,UAAAA,CAA2BA,GAAgBA,EAAAA;AAC1CK,YAAMA,OAAOA,GAAGA,IAAIA,WAAWA,EAAEA,CAACA;AAClCA,YAAMA,KAAKA,GAAGA,EAACA,KAAKA,EAACA,CAACA,EAACA;YAAEA,MAAMA,GAAEA,EAACA,KAAKA,EAACA,CAACA,EAACA,CAACA;AAC3CA,YAAMA,IAAIA,GAAGA,IAAIA,UAAUA,CAACA,GAAGA,CAACA,CAACA;AACjCA,YAAMA,MAAMA,GAAYA,OAAOA,CAACA,cAAcA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,MAAMA,EAAEA,KAAKA,EAAEA,MAAMA,CAACA,CAACA;AACjFA,eAAOA,EAACA,MAAMA,EAANA,MAAMA,EAAEA,KAAKA,EAACA,KAAKA,CAACA,KAAKA,EAAEA,MAAMA,EAACA,MAAMA,CAACA,KAAKA,EAACA,CAACA;KACxDA;AANeL,QAAAA,CAAAA,UAAUA,GAAAA,UAMzBA,CAAAA;CACDA,CAAAA,CApCM,IAAI,KAAJ,IAAI,GAAA,EAAA,CAAA,CAAA,CAoCV;AAED,IAAO,GAAG,CAsDT;AAtDD,CAAA,UAAO,GAAG,EAAC;AACVM,QAAMA,MAAMA,GAAGA,EAAEA,MAAMA,EAAEA,YAAYA,EAAEA,MAAMA,EAAEA,YAAYA,EAAEA,MAAMA,EAAEA,WAAWA,EAAEA,CAAAA;AAClFA,aAAAA,YAAAA,CAA4BA,IAAiBA,EAAAA;ADwItC,eAAO,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa;ACtI3DC,gBAAMA,KAAKA,GAAGA,IAAIA,QAAQA,CAACA,IAAIA,EAAEA,CAACA,EAAEA,CAACA,CAACA,CAACA,QAAQA,CAACA,CAACA,EAAEA,KAAKA,CAACA,CAACA;AAC1DA,gBAAMA,IAAIA,GAAGA,MAAMA,CAACA,KAAKA,CAACA,CAACA;AAC3BA,mBAAOA,CAACA,GAAGA,iBAAeA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,oBAAcA,IAAIA,IAAIA,aAAaA,GAAGA,KAAKA,CAACA,QAAQA,CAACA,EAAEA,CAAEA,CAAAA,YAASA,CAACA;AACnHA,gBAAIA,IAAUA,YAAAA,CAACA;AACfA,gBAAGA,IAAIA,KAAKA,YAAYA,IAAIA,EAAEA,MAAMA,IAAIA,CAACA,YAAYA,EAAEA,CAAAA,AAACA,EAAEA;AACzDA,uBAAOA,CAACA,GAAGA,CAACA,eAAeA,EAAEA,IAAIA,CAACA,CAACA;AAClCA,sBAAcA,CAACA,EAAEA,GAAGA,IAAIA,CAACA;;uCACMA,IAAIA,CAACA,UAAUA,CAACA,IAAIA,CAACA;;oBAA9CA,MAAMA,oBAANA,MAAMA;oBAAEA,KAAKA,oBAALA,KAAKA;oBAAEA,MAAMA,oBAANA,MAAMA;;AAC5BA,sBAAMA,CAACA,GAAGA,EAAEA,CAACA;AACbA,oBAAMA,MAAMA,GAAGA,QAAQA,CAACA,aAAaA,CAACA,QAAQA,CAACA,CAACA;AAChDA,sBAAMA,CAACA,KAAKA,GAAGA,KAAKA,CAACA;AACrBA,sBAAMA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;AACvBA,oBAAMA,GAAGA,GAAGA,MAAMA,CAACA,UAAUA,CAACA,IAAIA,CAACA,CAACA;AACpCA,oBAAMA,GAAGA,GAAGA,GAAGA,CAACA,eAAeA,CAACA,KAAKA,EAAEA,MAAMA,CAACA,CAACA;AAC/CA,oBAAMA,OAAOA,GAAGA,GAAGA,CAACA,IAAgCA,CAACA;AACrDA,uBAAOA,CAACA,GAAGA,CAACA,MAAMA,CAACA,MAAMA,EAAEA,OAAOA,CAACA,MAAMA,CAACA,CAACA;AAC3CA,uBAAOA,CAACA,GAAGA,CAACA,MAAaA,EAAEA,CAACA,CAACA,CAACA;AAC9BA,mBAAGA,CAACA,YAAYA,CAACA,GAAGA,EAAEA,CAACA,EAAEA,CAACA,CAACA,CAACA;AAC5BA,wBAAQA,CAACA,IAAIA,CAACA,SAASA,GAAGA,EAAEA,CAACA;AAC7BA,wBAAQA,CAACA,IAAIA,CAACA,WAAWA,CAACA,MAAMA,CAACA,CAACA;aAClCA,MAAMA;AACNA,oBAAMA,GAAGA,GAAGA,QAAQA,CAACA,aAAaA,CAACA,KAAKA,CAACA,CAACA;AAC1CA,oBAAIA,GAAGA,IAAIA,IAAIA,CAACA,CAACA,IAAIA,CAACA,EAAEA,EAAEA,IAAIA,EAAEA,IAAIA,IAAIA,YAAYA,EAAEA,CAACA,CAACA;AACxDA,oBAAMA,GAAGA,GAAGA,GAAGA,CAACA,eAAeA,CAACA,IAAIA,CAACA,CAACA;AACtCA,mBAAGA,CAACA,GAAGA,GAAGA,GAAGA,CAACA;AACdA,wBAAQA,CAACA,IAAIA,CAACA,SAASA,GAAGA,EAAEA,CAACA;AAC7BA,wBAAQA,CAACA,IAAIA,CAACA,WAAWA,CAACA,GAAGA,CAACA,CAACA;aAC/BA;SACDA,CAAAA,CAAAA;KAAAD;AAEDA,QAAIA,QAAQA,CAACA,IAAIA,EAAEA;AAClBA,YAAIA,QAAQA,CAACA,IAAIA,CAACA,UAAUA,CAACA,eAAeA,CAACA,EAAEA;8CACvBA,QAAQA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,KAAKA,CAACA,GAAGA,CAACA;;;;gBAAhDA,KAAKA;gBAAEA,GAAGA;;AACnBA,wBAAYA,CAACA,OAAOA,CAACA,IAAIA,UAAUA,CAACA,MAAMA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,CAACA,EAAEA,GAAGA,EAAEA,IAAIA,UAAUA,CAACA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,UAAAA,KAAKA,EAAAA;AACnGA,4BAAYA,CAACA,OAAOA,CAACA,aAAaA,EAAEA,IAAIA,CAACA,QAAQA,CAACA,IAAIA,UAAUA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;AAC1EA,wBAAQA,CAACA,IAAIA,GAAGA,EAAEA,CAACA;AACnBA,wBAAQA,CAACA,MAAMA,EAAEA,CAACA;aAClBA,CAACA,CAACA;SACHA,MAAMA;+CACkBA,QAAQA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA,CAACA,KAAKA,CAACA,GAAGA,CAACA;;;;gBAAnDA,QAAQA;gBAAEA,GAAGA;;AACpBA,oBAAQA,CAACA,OAAOA,CAACA,gBAAgBA,CAACA,CAACA;AACnCA,kBAAMA,CAACA,YAAYA,CAACA,QAAQA,EAAEA,GAAGA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAACA;SACtDA;KACDA,MAAMA,IAAIA,MAAMA,CAACA,YAAYA,EAAEA;AAC/BA,gBAAQA,CAACA,gBAAgBA,CAACA,kBAAkBA,EAAEA,YAAAA;AAC7CA,oBAAQA,CAACA,cAAcA,CAACA,WAAWA,CAACA,CAACA,gBAAgBA,CAACA,QAAQA,EAAEA,UAAAA,CAACA,EAAAA;AAAMA,sBAAMA,CAACA,UAAUA,CAACA,CAACA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAAAA;aAAEA,EAAEA,KAAKA,CAACA,CAACA;SACzHA,CAACA,CAACA;KACHA,MAAMA;AACNA,gBAAQA,CAACA,OAAOA,CAACA,2CAA2CA,CAACA,CAACA;KAC9DA;CACDA,CAAAA,CAtDM,GAAG,KAAH,GAAG,GAAA,EAAA,CAAA,CAAA,CAsDT","file":"tmp.js","sourcesContent":[null,"var base64;\n(function (base64_1) {\n    base64_1._chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    base64_1.encode = function (arraybuffer, url, equals) {\n        let chars = base64_1._chars;\n        if (url)\n            chars = chars.substr(0, 62) + '-_';\n        var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = \"\";\n        for (i = 0; i < len; i += 3) {\n            base64 += chars[bytes[i] >> 2];\n            base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n            base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n            base64 += chars[bytes[i + 2] & 63];\n        }\n        if ((len % 3) === 2) {\n            base64 = base64.substring(0, base64.length - 1) + (equals ? \"=\" : \"\");\n        }\n        else if (len % 3 === 1) {\n            base64 = base64.substring(0, base64.length - 2) + (equals ? \"==\" : \"\");\n        }\n        return base64;\n    };\n    base64_1.decode = function (base64, url) {\n        let chars = base64_1._chars;\n        if (url)\n            chars = chars.substr(0, 62) + '-_';\n        var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n        if (base64[base64.length - 1] === \"=\") {\n            bufferLength--;\n            if (base64[base64.length - 2] === \"=\") {\n                bufferLength--;\n            }\n        }\n        var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n        for (i = 0; i < len; i += 4) {\n            encoded1 = chars.indexOf(base64[i]);\n            encoded2 = chars.indexOf(base64[i + 1]);\n            encoded3 = chars.indexOf(base64[i + 2]);\n            encoded4 = chars.indexOf(base64[i + 3]);\n            bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n            bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n            bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n        }\n        return arraybuffer;\n    };\n})(base64 || (base64 = {}));\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, Promise, generator) {\n    return new Promise(function (resolve, reject) {\n        generator = generator.call(thisArg, _arguments);\n        function cast(value) { return value instanceof Promise && value.constructor === Promise ? value : new Promise(function (resolve) { resolve(value); }); }\n        function onfulfill(value) { try { step(\"next\", value); } catch (e) { reject(e); } }\n        function onreject(value) { try { step(\"throw\", value); } catch (e) { reject(e); } }\n        function step(verb, value) {\n            var result = generator[verb](value);\n            result.done ? resolve(result.value) : cast(result.value).then(onfulfill, onreject);\n        }\n        step(\"next\", void 0);\n    });\n};\nconst repoName = \"phire-store/testing\";\nconst branch = 'master';\nclass Github {\n    constructor(access_token = null, apiUrl = `https://api.github.com/`) {\n        this.access_token = access_token;\n        this.apiUrl = apiUrl;\n    }\n    getRepo(repo) {\n        return new GithubRepo(this, repo);\n    }\n    fetch(path, data, authenticate = false) {\n        return __awaiter(this, void 0, Promise, function* () {\n            if (!data)\n                data = { headers: new Headers() };\n            if (!data.headers)\n                data.headers = new Headers();\n            const h = data.headers;\n            if (authenticate)\n                if (this.access_token)\n                    h.append(\"Authorization\", \"token \" + this.access_token);\n                else\n                    throw Error(`can't ${data.method} ${path} without access token`);\n            console.log(\"fetch\", this.apiUrl + path, data);\n            return yield fetch(this.apiUrl + path, data);\n        });\n    }\n    fetchJSON(path, data, authenticate = false) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield (yield this.fetch(path, data, authenticate)).json();\n        });\n    }\n    fetchRaw(path, data, authenticate = false) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const headers = new Headers();\n            headers.append(\"Accept\", \"application/vnd.github.v3.raw\");\n            const r = yield this.fetch(path, { headers }, authenticate);\n            return yield r.arrayBuffer();\n        });\n    }\n    postJSON(path, data, method = \"POST\", authenticate = false) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const headers = new Headers();\n            headers.append(\"Content-Type\", \"application/json;charset=UTF-8\");\n            return yield this.fetchJSON(path, {\n                method,\n                headers,\n                body: JSON.stringify(data)\n            }, authenticate);\n        });\n    }\n    createGist(description, files, is_public = true, authenticate = false) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.postJSON(\"gists\", {\n                description, public: is_public,\n                files: files\n            }, \"POST\", authenticate);\n        });\n    }\n    getGist(id) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.fetchJSON(\"gists/\" + id);\n        });\n    }\n}\nclass GithubRepo {\n    constructor(github, repo) {\n        this.github = github;\n        this.repo = repo;\n    }\n    getRefs() {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.github.fetchJSON(this.repo + \"/git/refs\");\n        });\n    }\n    getRef(ref = \"heads/master\") {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.github.fetchJSON(this.repo + \"/git/refs/\" + ref);\n        });\n    }\n    updateRef(sha, ref = \"heads/master\") {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.github.postJSON(this.repo + \"/git/refs/\" + ref, { sha }, \"PATCH\");\n        });\n    }\n    getHead() {\n        return __awaiter(this, void 0, Promise, function* () {\n            const branch = yield this.getRef();\n            return branch.object.sha;\n        });\n    }\n    getTree(sha, recursive = false) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.github.fetchJSON(this.repo + \"/git/trees/\" + sha + (recursive ? \"?recursive=1\" : \"\"));\n        });\n    }\n    createBlob(data) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const resp = yield this.github.postJSON(this.repo + \"/git/blobs\", {\n                encoding: \"base64\",\n                content: base64.encode(data, false, true)\n            });\n            return resp.sha;\n        });\n    }\n    getBlob(sha) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.github.fetchRaw(this.repo + \"/git/blobs/\" + sha);\n        });\n    }\n    createTree(base_tree, path, sha) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const resp = yield this.github.postJSON(this.repo + \"/git/trees\", {\n                base_tree,\n                tree: [{ path, mode: \"100644\", type: \"blob\", sha }]\n            });\n            return resp;\n        });\n    }\n    createCommit(parent, tree, message) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return yield this.github.postJSON(this.repo + \"/git/commits\", { message, parents: [parent], tree });\n        });\n    }\n    pushFileToMaster(path, content, commitMessage) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const head = yield this.getHead();\n            const newtree = yield this.createTree(head, path, yield this.createBlob(content.buffer));\n            const newsha = newtree.sha;\n            const files = newtree.tree;\n            const filesha = files.filter(file => file.path == path)[0].sha;\n            const commit = yield this.createCommit(head, newsha, commitMessage);\n            yield this.updateRef(commit.sha);\n            return filesha;\n        });\n    }\n}\nlet github = new Github(localStorage.getItem(\"accessToken\"));\nlet repo = github.getRepo(repoName);\nvar SimpleCrypto;\n(function (SimpleCrypto) {\n    function encrypt(data) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const key = yield crypto.subtle.generateKey({ name: 'AES-CBC', length: 128 }, true, [\"encrypt\"]);\n            const iv = new Uint8Array(16);\n            // crypto.getRandomValues(iv);\n            // IV randomness not necessary because every key is only used once\n            const key_arr = yield crypto.subtle.exportKey(\"raw\", key);\n            return {\n                data: new Uint8Array(yield crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, key, data)),\n                key: base64.encode(key_arr, true, false),\n                key_arr,\n                iv: iv\n            };\n        });\n    }\n    SimpleCrypto.encrypt = encrypt;\n    function decrypt(data, key_str, iv) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const key = yield crypto.subtle.importKey(\"raw\", new Uint8Array(base64.decode(key_str, true)), \"AES-CBC\", false, [\"decrypt\"]);\n            return yield crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, key, data);\n        });\n    }\n    SimpleCrypto.decrypt = decrypt;\n})(SimpleCrypto || (SimpleCrypto = {}));\nvar Upload;\n(function (Upload) {\n    let uploadMethod = \n    //(f, d) => repo.pushFileToMaster(f, d, \"add\");\n    //(f, d) => repo.pushFileToMaster(f, d, \"add\");\n    function (f, d) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return (yield github.createGist(Util.randomString(0, 10), { [f]: { content: base64.encode(d.buffer, true, false) } })).id;\n        });\n    };\n    let downloadMethod = \n    //(sha) => repo.getBlob(sha);\n    //(sha) => repo.getBlob(sha);\n    function (sha) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const gist = yield github.getGist(sha);\n            const file = gist.files[Object.keys(gist.files)[0]];\n            if (file.truncated) {\n                return base64.decode(yield (yield fetch(file.raw_url)).text(), true);\n            }\n            else\n                return base64.decode(file.content, true);\n        });\n    };\n    function getAllowUploadURL() {\n        return __awaiter(this, void 0, Promise, function* () {\n            const info = yield SimpleCrypto.encrypt(Util.hexToArr(github.access_token));\n            location.hash = \"#allowupload!\" + base64.encode(info.data.buffer, true, false) + \"!\" + info.key;\n        });\n    }\n    Upload.getAllowUploadURL = getAllowUploadURL;\n    function uploadEncrypted(inputData) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const filename = Util.randomString(1, 16);\n            const { key, iv, data } = yield SimpleCrypto.encrypt(inputData);\n            return { key, iv, sha: yield uploadMethod(filename, data) };\n        });\n    }\n    Upload.uploadEncrypted = uploadEncrypted;\n    function downloadFile(sha, key) {\n        return __awaiter(this, void 0, Promise, function* () {\n            sha = Util.arrToHex(new Uint8Array(base64.decode(sha, true)));\n            return yield SimpleCrypto.decrypt(new Uint8Array(yield downloadMethod(sha)), key, new Uint8Array(16));\n        });\n    }\n    Upload.downloadFile = downloadFile;\n    function uploadFile(evt) {\n        return __awaiter(this, void 0, Promise, function* () {\n            try {\n                document.body.textContent = \"Uploading...\";\n                const f = evt.target.files[0];\n                if (f) {\n                    const data = new Uint8Array(yield readFile(f));\n                    const info = yield uploadEncrypted(data);\n                    const sha = base64.encode(Util.hexToArr(info.sha).buffer, true, false);\n                    history.replaceState({}, \"\", \"#\" + sha + \"!\" + info.key);\n                    return data.buffer;\n                }\n                else\n                    throw \"no image selected\";\n            }\n            catch (e) {\n                document.body.textContent = JSON.stringify(e);\n                throw e;\n            }\n        });\n    }\n    Upload.uploadFile = uploadFile;\n    function readFile(f) {\n        return __awaiter(this, void 0, Promise, function* () {\n            return new Promise((resolve, reject) => {\n                const r = new FileReader();\n                r.onload = e => resolve(r.result);\n                r.readAsArrayBuffer(f);\n            });\n        });\n    }\n    Upload.readFile = readFile;\n})(Upload || (Upload = {}));\nvar Util;\n(function (Util) {\n    function randomString(minlength, maxlength = minlength) {\n        const length = (Math.random() * (maxlength + 1 - minlength) + minlength) | 0;\n        return base64.encode(crypto.getRandomValues(new Uint8Array(length * 3 / 4 + 2)).buffer, true, false).substr(0, length);\n    }\n    Util.randomString = randomString;\n    function hexToArr(hex) {\n        const out = new Uint8Array(hex.length / 2);\n        for (let i = 0; i < hex.length; i += 2) {\n            out[i / 2] = parseInt(hex.substr(i, 2), 16);\n        }\n        return out;\n    }\n    Util.hexToArr = hexToArr;\n    function arrToHex(arr) {\n        let out = \"\";\n        for (const byte of arr)\n            out += (byte < 16 ? \"0\" + byte.toString(16) : byte.toString(16));\n        return out;\n    }\n    Util.arrToHex = arrToHex;\n    let WebP;\n    function supportsWebP() {\n        return __awaiter(this, void 0, Promise, function* () {\n            return new Promise((resolve, reject) => {\n                if (WebP)\n                    resolve(WebP.height === 2);\n                else {\n                    WebP = new Image();\n                    WebP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';\n                    WebP.onload = WebP.onerror = () => resolve(WebP.height === 2);\n                }\n            });\n        });\n    }\n    Util.supportsWebP = supportsWebP;\n    function decodeWebP(buf) {\n        const decoder = new WebPDecoder();\n        const width = { value: 0 }, height = { value: 0 };\n        const data = new Uint8Array(buf);\n        const bitmap = decoder.WebPDecodeRGBA(data, data.length, width, height);\n        return { bitmap, width: width.value, height: height.value };\n    }\n    Util.decodeWebP = decodeWebP;\n})(Util || (Util = {}));\nvar GUI;\n(function (GUI) {\n    const magics = { 0xFFD8: 'image/jpeg', 0x5249: 'image/webp', 0x8950: 'image/png' };\n    function displayImage(data) {\n        return __awaiter(this, void 0, Promise, function* () {\n            const magic = new DataView(data, 0, 2).getInt16(0, false);\n            const mime = magics[magic];\n            console.log(`displaying ${data.byteLength / 1000}kByte mime=${mime || \"unknown: 0x\" + magic.toString(16)} image`);\n            let file;\n            if (mime === \"image/webp\" && !(yield Util.supportsWebP())) {\n                console.log(\"decoding WebP\", data);\n                window._d = data;\n                const { bitmap, width, height } = Util.decodeWebP(data);\n                bitmap.pop();\n                const canvas = document.createElement(\"canvas\");\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d');\n                const img = ctx.createImageData(width, height);\n                const imgdata = img.data;\n                console.log(bitmap.length, imgdata.length);\n                imgdata.set(bitmap, 0);\n                ctx.putImageData(img, 0, 0);\n                document.body.innerHTML = \"\";\n                document.body.appendChild(canvas);\n            }\n            else {\n                const img = document.createElement(\"img\");\n                file = new Blob([data], { type: mime || \"image/jpeg\" });\n                const url = URL.createObjectURL(file);\n                img.src = url;\n                document.body.innerHTML = \"\";\n                document.body.appendChild(img);\n            }\n        });\n    }\n    if (location.hash) {\n        if (location.hash.startsWith(\"#allowupload!\")) {\n            const [, crypt, key] = location.hash.substr(1).split(\"!\");\n            SimpleCrypto.decrypt(new Uint8Array(base64.decode(crypt, true)), key, new Uint8Array(16)).then(token => {\n                localStorage.setItem(\"accessToken\", Util.arrToHex(new Uint8Array(token)));\n                location.hash = \"\";\n                location.reload();\n            });\n        }\n        else {\n            const [filename, key] = location.hash.substr(1).split(\"!\");\n            document.writeln(\"Loading...<!--\");\n            Upload.downloadFile(filename, key).then(displayImage);\n        }\n    }\n    else if (github.access_token) {\n        document.addEventListener('DOMContentLoaded', () => {\n            document.getElementById(\"fileinput\").addEventListener('change', e => { Upload.uploadFile(e).then(displayImage); }, false);\n        });\n    }\n    else {\n        document.writeln(\"No image given and upload key missing<!--\");\n    }\n})(GUI || (GUI = {}));\n//# sourceMappingURL=tmp.js.map",null]}